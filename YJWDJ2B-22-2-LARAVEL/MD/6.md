### ６장 인증과 인가
- 인증: 사용자의 신원을 검증
  - Authentication, Certification
- 인가: 권한 부여
  - Authorization
#### 6-1 세션기반 인증
- 가장 기본적인 인증 방법
- 쿠키, 세션정보 필요
- DB 정보 이용
- 기본인증: DB + 세션인증
- 로그인, 로그아웃, 비밀번호 리마인더, 비밀번호 리셋 기능
- 기본인증에 대한 설명 + 기본 인증 확장법
#### 6-1-1 인증 지원 클래스 및 그 기능
- 3가지 인터페이스
- Illuminate/Contracts/Auth/Factory
  - 인증 처리를 결정
      - 일반 웹 앱: Eloquent를 이용(DB이용) + 세션
      - API　앱: Eloquent를 이용(DB이용) + 토큰(인증정보의 유지)
- Illuminate/Contracts/Auth/Guard
  - 인증정보 조작
  - 자격정보의 검증, 로그인한 사용자로의 접근, 사용자 식별 정보로의 접근
  - 표준 인증 서비스: 세션기반으로 UserProvider(인터페이스)를 통해 인증정보 획득가능
- Illuminate/Contracts/Auth/UserProvider
  - 인증처리 구현(인스턴스)를 제공
  - 등록: config/auth.php - providers 배열에 등록해서 사용
#### 6-1-2 인증처리 이해
- 표준 인증 처리: 기본 인증
- DB기반, 세션 기반
- DB기반 인증
- Illuminate/Auth/DatabaseUserProvider
- Illuminate/Auth/EloquentUserProvider
  - Illuminate/Contracts/Auth/UserProvider의 구상 클래스
- 교과서 표 6.1 (235 페이지) 참고
- --> 메서드들의 반환값
  - Illuminate/Contracts/Auth/Authenticable 인터페이스의 구상 클래스
  - 표 6.2(235 페이지)
- 커스텀 인증처리 (표준인증처리 안하고)
  - Illuminate/Contracts/Auth/Authenticable
  - Illuminate/Contracts/Auth/UserProvider
  - 의 적절한 조합 -> 등록처리도 해야함
- Illuminate/Contracts/Auth/Authenticable의 구현 이해
  - 인증처리나 로그인 후의 사용자 접근 등으로 사용자 특정하기 위해 이용하는 기능들을 제공
#### 6-1-3 DB/세션 이용 인증 처리
- 표준(기본) 인증처리
- 1 . 설정 확인
  - user 테이블 (p.238 표 6-4 형태)
    - Illuminate/Auth/GenericUser 클래스
      - Illuminate/Contacts/Auth/Authenticatable 인터페이스 구현
  - 세션
    - Illuminate/Auth/SessionGuard 클래스
      - Illuminate/Contacts/Auth/StateGuard 인터페이스 구현
  - 드라이버로 등록 되어 있어야 함
    - config/auth.php에 등록
- 2 . 로그인 수행
  - illuminate/Auth/SessionGuard 클래스의 메서드
  - attempt 메서드: 로그인 처리 실행. p.48
  - p.239
  - user 메서드: 로그인 후 인증된 사용자 정보에 접근할 때 사용 p.50
  - p.240
#### 6-1-4 폼 인증 처리
- Form 양식
- web.php 파일을 백업해 두기 필요
- 패키지 설치 필요
  - sail composer require laravel/breeze --dev
- 패키지에 대한 설치 필요
  - sail artisan breeze:install
- --> 인증처리관련 내용을 스캐폴딩한 것이다.
- 사용자 등록처리
  - --> 회원가입 asdfadfasdf
  - 표준: App/Http/Controllers/Auth/RegisterdUserController으로 제공
- 로그인 처리
  - --> 로그인 처리
  - 표준: App/Http/Controllers/Auth/AuthenticatedSessionController 으로 제공
- 기본 종작 커스터마이즈
  - App/Http/Controllers/Auth/AuthentocatedSessionController의 store 메서드와
  - App/Http/Request/Auth/LoginRequest의 구현 변경
#### 6-1-5 인증 처리 커스터마이즈
- 라라벨에서 제공하는 DB 인증이 아닌 커스텀 인증으로 바꾸기
- 인증 드라이브 확장: 상속, 구현
- provider 클래스를 상속하여 재정의 및 구현
- 인증 드라이브 등록
----
- 인증 드라이브 확장의 예 p.244-245
- 캐시 기능을 이용하여 성능 개선
- 인증드라이브 등록
- AuthServiceProvider의 boot메서드
- 커스텀 인증 드라이버 지정
- config/